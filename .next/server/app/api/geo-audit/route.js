(()=>{var a={};a.id=5963,a.ids=[5963],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57880:(a,b,c)=>{"use strict";c.r(b),c.d(b,{handler:()=>C,patchFetch:()=>B,routeModule:()=>x,serverHooks:()=>A,workAsyncStorage:()=>y,workUnitAsyncStorage:()=>z});var d={};c.r(d),c.d(d,{POST:()=>v});var e=c(96559),f=c(48088),g=c(37719),h=c(26191),i=c(81289),j=c(261),k=c(92603),l=c(39893),m=c(14823),n=c(47220),o=c(66946),p=c(47912),q=c(99786),r=c(46143),s=c(86439),t=c(43365),u=c(32190);async function v(a){try{let{url:b}=await a.json();if(!b)return u.NextResponse.json({error:"URL is required"},{status:400});let c=await w(b),d=function(a){let{html:b}=a,c=b.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim().split(" ").filter(a=>a.length>0).length,d=(b.match(/<h1[^>]*>/gi)||[]).length,e=(b.match(/<h2[^>]*>/gi)||[]).length,f=(b.match(/<h3[^>]*>/gi)||[]).length,g=/FAQ|frequently asked|common questions/i.test(b),h=(b.match(/\?<\/h[2-6]>/gi)||[]).length>2,i=b.includes("schema.org")||b.includes("application/ld+json"),j=b.includes('"@type":"Article"')||b.includes('"@type":"BlogPosting"'),k=b.includes('"@type":"FAQPage"')||b.includes('"@type":"Question"'),l=(b.match(/\d+(\.\d+)?%|\d{1,3}(,\d{3})*(\.\d+)?|\$\d+|€\d+|£\d+/g)||[]).length,m=b.includes("<cite")||b.includes("citation")||/\[\d+\]/.test(b),n=b.includes("<blockquote")||b.includes("<q")||/"[^"]{50,}"/.test(b),o=(b.match(/<ol[^>]*>/gi)||[]).length,p=(b.match(/<ul[^>]*>/gi)||[]).length,q=/<meta[^>]*name=["']description["'][^>]*>/i.test(b),r=/<meta[^>]*property=["']og:/i.test(b),s=/<meta[^>]*name=["']twitter:/i.test(b),t=[/how to/gi,/what is/gi,/why does/gi,/when should/gi,/can you/gi,/explain/gi,/guide to/gi,/tips for/gi].reduce((a,c)=>a+(b.match(c)||[]).length,0),u=/table of contents|toc|contents/i.test(b),v=/<h[2-6][^>]*>.*conclusion/i.test(b),w=/<h[2-6][^>]*>.*introduction|overview/i.test(b),x=/example|case study|for instance|such as/i.test(b),y=(b.match(/<code[^>]*>/gi)||[]).length,z=/is defined as|refers to|means that|is a type of/i.test(b),A=(b.match(/<strong[^>]*>|<b[^>]*>/gi)||[]).length;return{wordCount:c,contentLength:a.contentLength,structure:{h1Count:d,h2Count:e,h3Count:f,totalHeadings:d+e+f,hasFAQ:g,hasQAFormat:h,totalLists:o+p,hasTableOfContents:u,hasConclusion:v,hasIntroduction:w},semantic:{hasSchema:i,hasArticleSchema:j,hasFAQSchema:k,hasDefinitions:z,hasBoldKeywords:A,conversationalCount:t},citations:{statisticsCount:l,hasCitations:m,hasQuotes:n,hasExamples:x,codeBlocks:y},technical:{hasMetaDescription:q,hasOpenGraph:r,hasTwitterCard:s,orderedLists:o,unorderedLists:p}}}(c),e=function(a){var b,c,d,e,f,g;let h,i,j,k,l=[],m=0,n=(b=a.structure,c=a.wordCount,h=100,0===b.h1Count?h-=20:b.h1Count>1&&(h-=10),b.totalHeadings<Math.floor(c/300)&&(h-=15),0===b.h2Count&&(h-=10),(b.hasFAQ||b.hasQAFormat)&&(h+=10),b.totalLists>0&&(h+=5),b.hasTableOfContents&&(h+=5),Math.max(0,Math.min(100,h)));l.push({score:n,category:"Content Structure",issues:function(a,b){let c=[];return 0===a.h1Count&&c.push("Missing H1 tag"),a.h1Count>1&&c.push("Multiple H1 tags found"),0===a.h2Count&&c.push("No H2 subheadings"),a.hasFAQ||a.hasQAFormat||c.push("No FAQ section detected"),a.totalHeadings<Math.floor(b/300)&&c.push("Insufficient heading structure"),0===a.totalLists&&c.push("No lists found for better readability"),c}(a.structure,a.wordCount),recommendations:function(a,b){let c=[];return 1!==a.h1Count&&c.push("Use exactly one H1 tag with your main keyword"),a.h2Count<3&&c.push("Add more H2 subheadings to break up content"),a.hasFAQ||c.push("Add an FAQ section to address common questions"),a.totalLists<2&&c.push("Use numbered or bulleted lists for better scanability"),!a.hasTableOfContents&&b>1500&&c.push("Add a table of contents for long content"),c.length>0?c:["Excellent content structure! Maintain current approach"]}(a.structure,a.wordCount),details:{h1Count:a.structure.h1Count,h2Count:a.structure.h2Count,totalHeadings:a.structure.totalHeadings,wordCount:a.wordCount,hasFAQ:a.structure.hasFAQ}}),m+=n;let o=(d=a.semantic,i=60,d.hasSchema&&(i+=20),d.hasArticleSchema&&(i+=10),d.hasFAQSchema&&(i+=10),d.conversationalCount>5&&(i+=15),d.hasDefinitions&&(i+=10),d.hasBoldKeywords>5&&(i+=5),Math.max(0,Math.min(100,i)));l.push({score:o,category:"Semantic Clarity",issues:function(a){let b=[];return a.hasSchema||b.push("No schema markup detected"),a.hasArticleSchema||a.hasFAQSchema||b.push("Missing specific schema types"),a.conversationalCount<3&&b.push("Limited conversational keywords"),a.hasDefinitions||b.push("No clear entity definitions found"),b}(a.semantic),recommendations:function(a){let b=[];return a.hasSchema||b.push("Add schema.org structured data markup"),a.hasArticleSchema||b.push("Implement Article or BlogPosting schema"),a.conversationalCount<5&&b.push("Include more conversational phrases (how to, what is, why does)"),a.hasDefinitions||b.push("Define key terms and entities clearly in the content"),a.hasBoldKeywords<5&&b.push("Bold important keywords and concepts"),b.length>0?b:["Good semantic optimization! Consider adding more structured data"]}(a.semantic),details:{hasSchema:a.semantic.hasSchema,conversationalKeywords:a.semantic.conversationalCount,definitions:a.semantic.hasDefinitions}}),m+=o;let p=(e=a.citations,j=50,e.statisticsCount>3?j+=20:e.statisticsCount>0&&(j+=10),e.hasCitations&&(j+=15),e.hasQuotes&&(j+=15),e.hasExamples&&(j+=10),e.codeBlocks>0&&(j+=5),Math.max(0,Math.min(100,j)));l.push({score:p,category:"AI Citations",issues:function(a){let b=[];return 0===a.statisticsCount&&b.push("No statistics or data points found"),a.hasCitations||b.push("No citations or references detected"),a.hasQuotes||b.push("No quotes from authorities"),a.hasExamples||b.push("Lacking concrete examples"),b}(a.citations),recommendations:function(a){let b=[];return a.statisticsCount<3&&b.push("Include 3-5 specific statistics with sources"),a.hasCitations||b.push("Add citations to authoritative sources"),a.hasQuotes||b.push("Include expert quotes to build authority"),a.hasExamples||b.push("Add real-world examples and case studies"),b.length>0?b:["Strong citation profile! AI platforms will likely reference this content"]}(a.citations),details:{statistics:a.citations.statisticsCount,quotes:a.citations.hasQuotes,examples:a.citations.hasExamples}}),m+=p;let q=(f=a,k=70,f.wordCount>2e3?k+=20:f.wordCount>1e3?k+=10:f.wordCount<500&&(k-=20),f.structure.hasIntroduction&&(k+=5),f.structure.hasConclusion&&(k+=5),f.structure.totalHeadings>5&&(k+=10),Math.max(0,Math.min(100,k)));return l.push({score:q,category:"Content Depth",issues:function(a){let b=[];return a.wordCount<500&&b.push("Content too short for comprehensive coverage"),a.wordCount<1e3&&b.push("Limited content depth"),a.structure.hasIntroduction||b.push("Missing clear introduction"),a.structure.hasConclusion||b.push("No conclusion section"),b}(a),recommendations:function(a){let b=[];return a.wordCount<1500&&b.push("Expand content to 1500+ words for better coverage"),a.structure.hasIntroduction||b.push("Add a clear introduction section"),a.structure.hasConclusion||b.push("Include a conclusion summarizing key points"),a.structure.totalHeadings<5&&b.push("Add more sections for comprehensive coverage"),b.length>0?b:["Excellent content depth! Very comprehensive coverage"]}(a),details:{wordCount:a.wordCount,sections:a.structure.totalHeadings,hasTableOfContents:a.structure.hasTableOfContents}}),{overallScore:Math.round((m+=q)/4),results:l,summary:(g=m/4)>=80?"Excellent GEO optimization! Your content is well-optimized for AI search engines and likely to be cited frequently.":g>=60?"Good foundation with room for improvement. Focus on the recommended areas to boost AI visibility.":g>=40?"Moderate optimization level. Significant improvements needed in multiple areas for better AI performance.":"Content needs substantial optimization for AI platforms. Start with structural improvements and semantic clarity.",timestamp:new Date().toISOString()}}(d);return u.NextResponse.json(e)}catch(a){return console.error("GEO Audit error:",a),u.NextResponse.json({error:"Failed to analyze URL",details:a instanceof Error?a.message:"Unknown error"},{status:500})}}async function w(a){try{let b=a;a.startsWith("http://")||a.startsWith("https://")||(b="https://"+a);try{new URL(b)}catch(b){throw Error(`Invalid URL format: ${a}`)}let c=await fetch(b,{headers:{"User-Agent":"GEO-Audit-Tool/1.0",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language":"en-US,en;q=0.5","Accept-Encoding":"gzip, deflate",Connection:"keep-alive","Upgrade-Insecure-Requests":"1"},redirect:"follow",signal:AbortSignal.timeout(15e3)});if(!c.ok)throw Error(`Failed to fetch URL: ${c.status} ${c.statusText}`);let d=await c.text();return{html:d,url:b,contentLength:d.length}}catch(a){if(a instanceof Error)throw Error(`Could not fetch URL: ${a.message}`);throw Error("Could not fetch URL: Unknown error")}}let x=new e.AppRouteRouteModule({definition:{kind:f.RouteKind.APP_ROUTE,page:"/api/geo-audit/route",pathname:"/api/geo-audit",filename:"route",bundlePath:"app/api/geo-audit/route"},distDir:".next",projectDir:"",resolvedPagePath:"/Users/heni/GEO/app/api/geo-audit/route.ts",nextConfigOutput:"standalone",userland:d}),{workAsyncStorage:y,workUnitAsyncStorage:z,serverHooks:A}=x;function B(){return(0,g.patchFetch)({workAsyncStorage:y,workUnitAsyncStorage:z})}async function C(a,b,c){var d;let e="/api/geo-audit/route";"/index"===e&&(e="/");let g=await x.prepare(a,b,{srcPage:e,multiZoneDraftMode:"false"});if(!g)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:u,params:v,nextConfig:w,isDraftMode:y,prerenderManifest:z,routerServerContext:A,isOnDemandRevalidate:B,revalidateOnlyGenerated:C,resolvedPathname:D}=g,E=(0,j.normalizeAppPath)(e),F=!!(z.dynamicRoutes[E]||z.routes[D]);if(F&&!y){let a=!!z.routes[D],b=z.dynamicRoutes[E];if(b&&!1===b.fallback&&!a)throw new s.NoFallbackError}let G=null;!F||x.isDev||y||(G="/index"===(G=D)?"/":G);let H=!0===x.isDev||!F,I=F&&!H,J=a.method||"GET",K=(0,i.getTracer)(),L=K.getActiveScopeSpan(),M={params:v,prerenderManifest:z,renderOpts:{experimental:{dynamicIO:!!w.experimental.dynamicIO,authInterrupts:!!w.experimental.authInterrupts},supportsDynamicResponse:H,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:null==(d=w.experimental)?void 0:d.cacheLife,isRevalidate:I,waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:void 0,onInstrumentationRequestError:(b,c,d)=>x.onRequestError(a,b,d,A)},sharedContext:{buildId:u}},N=new k.NodeNextRequest(a),O=new k.NodeNextResponse(b),P=l.NextRequestAdapter.fromNodeNextRequest(N,(0,l.signalFromNodeResponse)(b));try{let d=async c=>x.handle(P,M).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=K.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==m.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${J} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${J} ${a.url}`)}),g=async g=>{var i,j;let k=async({previousCacheEntry:f})=>{try{if(!(0,h.getRequestMeta)(a,"minimalMode")&&B&&C&&!f)return b.statusCode=404,b.setHeader("x-nextjs-cache","REVALIDATED"),b.end("This page could not be found"),null;let e=await d(g);a.fetchMetrics=M.renderOpts.fetchMetrics;let i=M.renderOpts.pendingWaitUntil;i&&c.waitUntil&&(c.waitUntil(i),i=void 0);let j=M.renderOpts.collectedTags;if(!F)return await (0,o.I)(N,O,e,M.renderOpts.pendingWaitUntil),null;{let a=await e.blob(),b=(0,p.toNodeOutgoingHttpHeaders)(e.headers);j&&(b[r.NEXT_CACHE_TAGS_HEADER]=j),!b["content-type"]&&a.type&&(b["content-type"]=a.type);let c=void 0!==M.renderOpts.collectedRevalidate&&!(M.renderOpts.collectedRevalidate>=r.INFINITE_CACHE)&&M.renderOpts.collectedRevalidate,d=void 0===M.renderOpts.collectedExpire||M.renderOpts.collectedExpire>=r.INFINITE_CACHE?void 0:M.renderOpts.collectedExpire;return{value:{kind:t.CachedRouteKind.APP_ROUTE,status:e.status,body:Buffer.from(await a.arrayBuffer()),headers:b},cacheControl:{revalidate:c,expire:d}}}}catch(b){throw(null==f?void 0:f.isStale)&&await x.onRequestError(a,b,{routerKind:"App Router",routePath:e,routeType:"route",revalidateReason:(0,n.c)({isRevalidate:I,isOnDemandRevalidate:B})},A),b}},l=await x.handleResponse({req:a,nextConfig:w,cacheKey:G,routeKind:f.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:z,isRoutePPREnabled:!1,isOnDemandRevalidate:B,revalidateOnlyGenerated:C,responseGenerator:k,waitUntil:c.waitUntil});if(!F)return null;if((null==l||null==(i=l.value)?void 0:i.kind)!==t.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==l||null==(j=l.value)?void 0:j.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,h.getRequestMeta)(a,"minimalMode")||b.setHeader("x-nextjs-cache",B?"REVALIDATED":l.isMiss?"MISS":l.isStale?"STALE":"HIT"),y&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let m=(0,p.fromNodeOutgoingHttpHeaders)(l.value.headers);return(0,h.getRequestMeta)(a,"minimalMode")&&F||m.delete(r.NEXT_CACHE_TAGS_HEADER),!l.cacheControl||b.getHeader("Cache-Control")||m.get("Cache-Control")||m.set("Cache-Control",(0,q.getCacheControlHeader)(l.cacheControl)),await (0,o.I)(N,O,new Response(l.value.body,{headers:m,status:l.value.status||200})),null};L?await g(L):await K.withPropagatedContext(a.headers,()=>K.trace(m.BaseServerSpan.handleRequest,{spanName:`${J} ${a.url}`,kind:i.SpanKind.SERVER,attributes:{"http.method":J,"http.target":a.url}},g))}catch(b){if(L||b instanceof s.NoFallbackError||await x.onRequestError(a,b,{routerKind:"App Router",routePath:E,routeType:"route",revalidateReason:(0,n.c)({isRevalidate:I,isOnDemandRevalidate:B})}),F)throw b;return await (0,o.I)(N,O,new Response(null,{status:500})),null}}},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},96487:()=>{}};var b=require("../../../webpack-runtime.js");b.C(a);var c=b.X(0,[4985,6055],()=>b(b.s=57880));module.exports=c})();